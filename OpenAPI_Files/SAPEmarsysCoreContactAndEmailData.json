{"openapi":"3.0.1","servers":[{"url":"https://{host}/api/v3","description":"Production server","variables":{"host":{"default":"api.emarsys.net","description":"This is the Emarsys API server"}}}],"info":{"description":"Export your contacts, contact lists, segments and contact registrations for the purpose of analysis.\nYou can also check the status of an export as well as download the data around the exports.  ","title":"SAP Emarsys Core - Contact and Email Data","version":"3.0.0"},"tags":[{"name":"Contact and email data"}],"externalDocs":{"description":"For more information, please visit our official SAP Emarsys developer portal.","url":"https://dev.emarsys.com/docs/core-api-reference/565a0ff84119c-emarsys-core-api-contact-and-email-data-endpoint-batch"},"x-sap-shortText":"Use these endpoints to export, check and download the specific email and contact data.","paths":{"/v3/contact/getchanges":{"post":{"summary":"Export Updated Contacts","description":"Exports the specified fields of contacts that have been modified within a certain time period. The changes must come from the specified form or API source to be included.\n\n| SOURCE | |UPDATED FIELDS |  | \n| --- | --- | --- | --- |\n| |   **Email address** | **Opt-in status** | **Other** | \n| **Forms (`register.php`)** | contact exported | contact exported | contact exported |\n| **API: [Contact update](https://dev.emarsys.com/docs/core-api-reference/f8ljhut3ac2i1-update-contacts)** | contact exported | contact exported | contact exported |\n| **[Data import](https://help.sap.com/docs/SAP_EMARSYS/f8e2fafeea804018a954a8857d9dfff3/5fd1bbd21e6e43fb909864d3b942ab7d.html)**  | contact **not** exported | contact **not** exported | contact **not** exported |\n\n**Important:** \n\nThe results are saved as a CSV file that you can access in multiple ways.\n- Exports flagged as `local` are stored on the Emarsys server that you can download via WebDAV or an API call.\n- Exports flagged as `sftp` can be accessed via SFTP.\n\n**Implementation**\n\n You can implement this method as follows:\n- Poll the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint to track the export status. When done, access the file at the [Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data) endpoint.\n- Set the `notification_url` parameter to implement a callback mechanism. When the export is ready, a request is sent to the provided URL with the same payload as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response. Failures are retried 5 times, with a one-minute wait between each try.\n\n\n**Notes**\n- As we are using a proxy for SFTP traffic, it is not necessary to whitelist any IPs on our side.\n- WebDAV access must be enabled first, and requires authentication to use. For a WebDAV account or SFTP access, contact Emarsys support.\n\n**Example**\n```csv\nuser_id;First Name;Last Name;E-Mail;Company\n8019189;user3;test_import;test1@emarsys.com;\n49036141;user3;test_import;test1@emarsys.com;\n50123406;user3;test_import;test1@emarsys.com;\n85600590;user3;test_import;test1@emarsys.com;\n```","operationId":"exportChangedContacts","tags":["Contact and email data"],"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"integer","description":"The export identifier that you can use to poll export status ([Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status)) and download the export file ([Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data))."}}}}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["distribution_method","origin","origin_id","time_range","contact_fields"],"properties":{"distribution_method":{"type":"string","enum":["sftp","local"],"description":"The method to access the export.\n\n**Note**: If the `sftp` option is selected, you must provide the SFTP configuration settings in the ftp_settings parameter."},"origin":{"type":"string","enum":["form","api","all"],"description":"Indicates which platform triggered the change."},"origin_id":{"type":"string","description":"The origin identifier. The default value *0* indicates no source. Other values specify a custom contact source.\n\n| Origin Type | Identifier |\n| --- | --- |\n| Form | Form identifier |\n| API | *0* |","default":"0"},"time_range":{"type":"array","description":"A two-element array that contains the _start date_ and _end date_ values.\n**Accepted format**: YYYY-MM-DD\n\n**datetime** format is available upon request, turn to support to enable it.","items":{"x-stoplight":{"id":"ftvghfu8jgmid"},"type":"string"}},"contact_fields":{"type":"array","description":"The field identifiers to include in the export. The following fields cannot be exported:\n\n| Field Identifier | Description |\n| --- | --- |\n| 27 | Average length of visit |\n| 28 | Average pages per day |\n| 29 | Last mail received |\n| 32 | User status |\n| 33 | Contact source |","minItems":1,"maxItems":20,"items":{"type":"integer"}},"delimiter":{"type":"string","enum":[",",";"],"description":"The delimiter character to be used in the CSV export.","default":","},"add_field_names_header":{"type":"integer","enum":[0,1],"default":0,"description":"Determines whether to insert a header row into the CSV file."},"language":{"type":"string","x-stoplight":{"id":"7ptclt4t7uw34"},"description":"The language of the export. The default is the account’s language. For the list of language codes, see [language codes](https://dev.emarsys.com/docs/core-api-reference/dbdc7035d4ea6-language-codes)."},"ftp_settings":{"type":"object","x-stoplight":{"id":"a2myia4puotwy"},"description":"Mandatory distribution settings parameter, if the `distribution_method` is `ftp`. For `local`, these settings are ignored.","properties":{"host":{"type":"string","x-stoplight":{"id":"cdprm8kyx6wn3"},"format":"uri","description":"The address of the FTP host."},"port":{"type":"string","x-stoplight":{"id":"jvetd1jjr3e99"},"description":"The port of the FTP host."},"username":{"type":"string","x-stoplight":{"id":"2jduh5uhmckq5"},"description":"The login user name."},"password":{"type":"string","x-stoplight":{"id":"x8o6t0s7rc7co"},"description":"The login password."},"folder":{"type":"string","x-stoplight":{"id":"4tssu807iwa90"},"description":"The folder on the FTP that contains the export file. Optional."}}},"notification_url":{"type":"string","x-stoplight":{"id":"0q7rys63fdlpu"},"description":"Sends a request to the provided URL when the export is ready.\n\nSet this parameter to implement a callback mechanism instead of polling the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint.\n\n**Note**: The payload is the same as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response.","format":"uri"}}},"examples":{"Example 1":{"value":{"distribution_method":"sftp","origin":"form","origin_id":"123","time_range":["2024-02-09","2024-04-02"],"contact_fields":[1,3,102342],"delimiter":",","add_field_names_header":1,"language":"en","ftp_settings":{"host":"https://example.com","port":"3231","username":"user","password":"pwd","folder":"path/of/a/folder"},"notification_url":"https://other_example.com"}}}}}}}},"/v3/email/getcontacts":{"post":{"summary":"Export a Contact List","description":"Exports the specified fields of contacts from a contact list as a CSV file.\n\n**Important:** \n\nThe results are saved as a CSV file that you can access in multiple ways.\n- Exports flagged as `local` are stored on the Emarsys server that you can download via WebDAV or an API call.\n-  Exports flagged as `sftp` can be accessed via SFTP.\n- Exports flagged as `mail` are sent to the specified address when ready.\n\n**Implementation**\n\n You can implement this method as follows:\n\n- Poll the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint to track the export status. When done, access the file at the [Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data) endpoint.\n- Set the `notification_url` parameter to implement a callback mechanism. When the export is ready, a request is sent to the provided URL with the same payload as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response. Failures are retried 5 times, with a one-minute wait between each try.\n\n**Notes**\n- As we are using a proxy for FTP traffic, it is not necessary to whitelist any IPs on our side.\n- WebDAV access must be enabled first, and requires authentication to use. For a WebDAV account or (S)FTP access, contact Emarsys support.\n\n**Example**\n\n```csv\nFirst Name;Last Name;E-mail;Opt-in\nFname_1;Lname_1;testuser@example.com;True\nFname_2;Lname_2;testuser@example.com;True\nFname_3;Lname_3;testuser@example.com;True\nFname_4;Lname_4;testuser@example.com;True\n```","operationId":"exportContactList","tags":["Contact and email data"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["distribution_method","contaclist","contact_fields"],"properties":{"distribution_method":{"type":"string","enum":["ftp","sftp","mail","local"],"description":"The method to access the export.\n\n**Note**: If the `sftp` option is selected, you must provide the SFTP configuration settings in the ftp_settings parameter."},"contaclist":{"type":"integer","description":"The identifier of the contact list to be exported."},"contact_fields":{"type":"array","description":"The field identifiers to include in the export. The following fields cannot be exported:\n\n| Field Identifier | Description |\n| --- | --- |\n| 27 | Average length of visit |\n| 28 | Average pages per day |\n| 29 | Last mail received |\n| 32 | User status |\n| 33 | Contact source |","minItems":1,"maxItems":20,"items":{"type":"integer"}},"delimiter":{"type":"string","enum":[",",";"],"description":"The delimiter character to be used in the CSV export.","default":","},"add_field_names_header":{"type":"integer","enum":[0,1],"default":1,"description":"Determines whether to insert a header row into the CSV file."},"language":{"type":"string","description":"The language of the export. The default is the account’s language. For the list of language codes, see [language codes](https://dev.emarsys.com/docs/core-api-reference/dbdc7035d4ea6-language-codes)."},"ftp_settings":{"type":"object","description":"Mandatory distribution settings parameter, if the `distribution_method` is `ftp`. For `local`, these settings are ignored.","properties":{"host":{"type":"string","format":"uri","description":"The address of the FTP host."},"port":{"type":"string","description":"The port of the FTP host."},"username":{"type":"string","description":"The login user name."},"password":{"type":"string","description":"The login password."},"folder":{"type":"string","description":"The folder on the FTP that contains the export file. Optional."}}},"email":{"type":"string","format":"email","description":"The email address to send the export to if the distribution method is `mail`."},"notification_url":{"type":"string","description":"Sends a request to the provided URL when the export is ready.\n\nSet this parameter to implement a callback mechanism instead of polling the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint.\n\n**Note**: The payload is the same as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response.","format":"uri"}}},"examples":{"Example 1":{"value":{"distribution_method":"ftp","contaclist":12122,"contact_fields":[1,3,22315],"delimiter":",","add_field_names_header":1,"language":"en","ftp_settings":{"host":"https://example.com","port":"1233","username":"user","password":"pwd","folder":"path/of/a/folder"},"email":"user@example.com","notification_url":"https://other_example.com"}}}}}},"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"integer","description":"The export identifier that you can use to poll export status ([Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status)) and download the export file ([Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data))."}}}}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}},"/v3/export/filter":{"post":{"summary":"Export a Segment","description":"Exports the specified fields of contacts from a segment as a CSV file.\n\n**Important:** \n\nThe results are saved as a CSV file that you can access in multiple ways.\n- Exports flagged as `local` are stored on the Emarsys server that you can download via WebDAV or an API call.\n- Exports flagged as `ftp` can be accessed via FTP.\n- Exports flagged as `sftp` can be accessed via SFTP.\n- Exports flagged as `mail` are sent to the specified address when ready.\n\n**Implementation**\n\nYou can implement this method as follows:\n\n- Poll the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint to track the export status. When done, access the file at the [Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data) endpoint.\n- Set the `notification_url` parameter to implement a callback mechanism. When the export is ready, a request is sent to the provided URL with the same payload as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response. Failures are retried 5 times, with a one-minute wait between each try.\n\n**Notes**\n- As we are using a proxy for FTP traffic, it is not necessary to whitelist any IPs on our side.\n- WebDAV access must be enabled first, and requires authentication to use. For a WebDAV account or (S)FTP access, contact Emarsys support.\n\n**Example**\n\nAn example contact list export including first name, last name, email address and opt-in status results in the following CSV:\n```csv\nFirst Name;Last Name;E-mail;Opt-in\nFname_1;Lname_1;testuser@example.com;True\nFname_2;Lname_2;testuser@example.com;True\nFname_3;Lname_3;testuser@example.com;True\nFname_4;Lname_4;testuser@example.com;True\n```","operationId":"exportSegment","tags":["Contact and email data"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["distribution_method","contaclist","contact_fields"],"properties":{"distribution_method":{"type":"string","enum":["ftp","sftp","mail","local"],"description":"The method to access the export.\n\n**Note**: If the `sftp` option is selected, you must provide the SFTP configuration settings in the ftp_settings parameter."},"contaclist":{"type":"integer","description":"The identifier of the contact list to be exported."},"contact_fields":{"type":"array","description":"The field identifiers to include in the export. The following fields cannot be exported:\n\n| Field Identifier | Description |\n| --- | --- |\n| 27 | Average length of visit |\n| 28 | Average pages per day |\n| 29 | Last mail received |\n| 32 | User status |\n| 33 | Contact source |","minItems":1,"maxItems":20,"items":{"type":"integer"}},"delimiter":{"type":"string","enum":[",",";"],"description":"The delimiter character to be used in the CSV export.","default":","},"add_field_names_header":{"type":"integer","enum":[0,1],"default":1,"description":"Determines whether to insert a header row into the CSV file."},"language":{"type":"string","description":"The language of the export. The default is the language setting of the administrator called `admin` in the account. For the list of language codes, see [language codes](https://dev.emarsys.com/docs/core-api-reference/dbdc7035d4ea6-language-codes).","minLength":2,"maxLength":2,"pattern":"^[a-z]{2}"},"ftp_settings":{"type":"object","description":"Mandatory distribution settings parameter, if the `distribution_method` is `ftp`. For `local`, these settings are ignored.","properties":{"host":{"type":"string","format":"uri","description":"The address of the FTP host."},"port":{"type":"string","description":"The port of the FTP host."},"username":{"type":"string","description":"The login user name."},"password":{"type":"string","description":"The login password."},"folder":{"type":"string","description":"The folder on the FTP that contains the export file. Optional."}}},"email":{"type":"string","format":"email","description":"The email address to send the export to if the distribution method is `mail`.\n\n**Note**: In such a scenario, this parameter is mandatory."},"notification_url":{"type":"string","description":"Sends a request to the provided URL when the export is ready.\n\nSet this parameter to implement a callback mechanism instead of polling the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint.\n\n**Note**: The payload is the same as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response.","format":"uri"}}},"examples":{"Example 1":{"value":{"distribution_method":"ftp","contaclist":12122,"contact_fields":[1,3,22315],"delimiter":",","add_field_names_header":1,"language":"en","ftp_settings":{"host":"https://example.com","port":"1233","username":"user","password":"pwd","folder":"path/of/a/folder"},"email":"user@example.com","notification_url":"https://other_example.com"}}}}}},"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"integer","description":"The export identifier that you can use to poll export status ([Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status)) and download the export file ([Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data))."}}}}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}},"/v3/contact/getregistrations":{"post":{"summary":"Export Contact Registrations","description":"Exports the specified fields of contacts registered through an Emarsys form within the specified time period as a CSV file.\n\n**Tip:** If you want to export registrations from other sources, use the [Export Updated Contacts](/reference/openapi.json/paths/~1v3~1contact~1getchanges/post) endpoint.\n\n\n**Important:** \n\nThe results are saved as a CSV file that you can access in multiple ways.\n- Exports flagged as `local` are stored on the Emarsys server that you can download via WebDAV or an API call.\n- Exports flagged as `sftp` can be accessed via SFTP.\n\n**Implementation**\n\nou can implement this method as follows:\n- Poll the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint to track the export status. When done, access the file at the [Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data) endpoint.\n- Set the `notification_url` parameter to implement a callback mechanism. When the export is ready, a request is sent to the provided URL with the same payload as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response. Failures are retried 5 times, with a one-minute wait between each try.\n\n**Notes**\n- WebDAV access must be enabled first, and requires authentication to use. For a WebDAV account or SFTP access, contact Emarsys support.\n\n**Example**\n```csv\nuser_id;First Name;Last Name;E-Mail;Company;last update\n135369573;user3;test_import;test1@emarsys.com;;\n171879718;user3;test_import;test1@emarsys.com;;\n183453150;user3;test_import;test1@emarsys.com;;\n188925627;user3;test_import;test1@emarsys.com;;\n```","operationId":"exportContactRegistrations","tags":["Contact and email data"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["distribution_method","time_range","contact_fields"],"properties":{"distribution_method":{"type":"string","enum":["ftp","sftp","mail","local"],"description":"The method to access the export.\n\n**Note**: If the `sftp` option is selected, you must provide the SFTP configuration settings in the ftp_settings parameter."},"contaclist":{"type":"integer","description":"The identifier of the contact list to be exported."},"time_range":{"type":"array","x-stoplight":{"id":"jne83l799io3l"},"minItems":2,"maxItems":2,"description":"A two-element array that contains the _start date_ and _end date_ values.\n\n**Accepted format**: YYYY-MM-DD HH-SS\n","items":{"x-stoplight":{"id":"tls270oonuvy5"},"type":"string","pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}"}},"with_timestamp":{"type":"integer","enum":[0,1],"default":1,"description":"Determines whether the registration timestamp is included in the export."},"contact_fields":{"type":"array","description":"The field identifiers to include in the export. The following fields cannot be exported:\n\n| Field Identifier | Description |\n| --- | --- |\n| 27 | Average length of visit |\n| 28 | Average pages per day |\n| 29 | Last mail received |\n| 32 | User status |\n| 33 | Contact source |","minItems":1,"maxItems":20,"items":{"type":"integer"}},"delimiter":{"type":"string","enum":[",",";"],"description":"The delimiter character to be used in the CSV export.","default":","},"add_field_names_header":{"type":"integer","enum":[0,1],"default":1,"description":"Determines whether to insert a header row into the CSV file."},"language":{"type":"string","description":"The language of the export. The default is the language setting of the administrator called `admin` in the account. For the list of language codes, see [language codes](https://dev.emarsys.com/docs/core-api-reference/dbdc7035d4ea6-language-codes).","minLength":2,"maxLength":2,"pattern":"^[a-z]{2}"},"sftp_settings":{"type":"object","description":"Mandatory distribution settings parameter, if the `distribution_method` is `ftp`. For `local`, these settings are ignored.","x-stoplight":{"id":"tkwi7vkub957m"},"properties":{"host":{"type":"string","format":"uri","description":"The address of the FTP host."},"port":{"type":"string","description":"The port of the FTP host."},"username":{"type":"string","description":"The login user name."},"password":{"type":"string","description":"The login password."},"folder":{"type":"string","description":"The folder on the FTP that contains the export file. Optional."}}},"notification_url":{"type":"string","description":"Sends a request to the provided URL when the export is ready.\n\nSet this parameter to implement a callback mechanism instead of polling the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint.\n\n**Note**: The payload is the same as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response.","format":"uri"}}},"examples":{"Example 1":{"value":{"distribution_method":"sftp","contaclist":2462456,"time_range":["2023-03-27","2023-04-26"],"with_timestamp":1,"contact_fields":[1,3,10235],"delimiter":",","add_field_names_header":1,"language":"en","sftp_settings":{"host":"http://example.com","port":"3423","username":"user","password":"pwd","folder":"path/of/a/folder"},"notification_url":"http://example.com"}}}}}},"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"integer","description":"The export identifier that you can use to poll export status ([Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status)) and download the export file ([Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data))."}}}}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}},"/v3/email/getresponses":{"post":{"summary":"Export Responses","description":"Exports the specified fields of contacts who responded to an email within a certain time period as a CSV file.\n\n**Important:** \n\nThe results are saved as a CSV file that you can access in multiple ways.\n- Exports flagged as `local` are stored on the Emarsys server that you can download via WebDAV or an API call.\n- Exports flagged as `sftp` can be accessed via SFTP.\n\n**Implementation**\n\nou can implement this method as follows:\n- Poll the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/4qd2h7o1jnxmd-check-export-status) endpoint to track the export status. When done, access the file at the [Download Export Data](https://dev.emarsys.com/docs/core-api-reference/2ndhiv5xao5ar-download-export-data) endpoint.\n- Set the `notification_url` parameter to implement a callback mechanism. When the export is ready, a request is sent to the provided URL with the same payload as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/4qd2h7o1jnxmd-check-export-status) response. Failures are retried 5 times, with a one-minute wait between each try.\n\n**Notes**\n- WebDAV access must be enabled first, and requires authentication to use. For a WebDAV account or SFTP access, contact Emarsys support.\n\n**Example**\n\n```csv\nuser_id;First Name;Last Name;E-Mail;Campaign title;Link title;Url;source\n287705659;user3;test_import;test1@emarsys.com;VisualCMS_2015_04_09_10_05_03;;www.emarsys.com;click\n287705659;user3;test_import;test1@emarsys.com;RSS_2015_04_09_10_05_03;;www.google.com.com;click\n287705659;user3;test_import;test1@emarsys.com;AC_recurring_2015_04_09_10_05_03;;;open\n```","operationId":"exportResponses","tags":["Contact and email data"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["distribution_method","time_range","contact_fields","sources","analysis_fields"],"properties":{"distribution_method":{"type":"string","enum":["ftp","sftp","mail","local"],"description":"The method to access the export.\n\n**Note**: If the `sftp` option is selected, you must provide the SFTP configuration settings in the ftp_settings parameter."},"time_range":{"type":"array","minItems":2,"maxItems":2,"description":"A two-element array that contains the _start date_ and _end date_ values.\n\n**Accepted format**: YYYY-MM-DD HH-SS\n","items":{"type":"string","pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}"}},"contact_fields":{"type":"array","description":"The field identifiers to include in the export. The following fields cannot be exported:\n\n| Field Identifier | Description |\n| --- | --- |\n| 27 | Average length of visit |\n| 28 | Average pages per day |\n| 29 | Last mail received |\n| 32 | User status |\n| 33 | Contact source |","minItems":1,"maxItems":20,"items":{"type":"integer"}},"sources":{"type":"array","description":"Determines whether the registration timestamp is included in the export.","enum":["trackable_links","registration_forms","tell_a_friend","contact_us","change_profile","unsubscribe","mail_open","complaint"],"items":{"type":"string"}},"analysis_fields":{"type":"array","uniqueItems":true,"description":"The contact behaviors to analyse based on specific field types of the email campaign.\n\n **Accepted values:**\n | Value | Description |\n | --- | --- |\n | 1 | Campaign title |\n | 2 | Section header |\n | 3 | Section group |\n | 4 | Link title |\n | 5 | URL |\n | 8 | Time |\n | 12 | Campaign identifier |\n | 13 | Version name |\n | 14 | Campaign category |\n | 15 | Link category |","items":{"type":"integer"}},"email_id":{"type":"integer","x-stoplight":{"id":"87blq6x9k45qt"},"description":"The identifier of the email campaign. Returns the contact's responses to the email."},"contaclist":{"type":"integer","description":"The identifier of the contact list to be exported."},"delimiter":{"type":"string","enum":[",",";"],"description":"The delimiter character to be used in the CSV export.","default":","},"add_field_names_header":{"type":"integer","enum":[0,1],"default":1,"description":"Determines whether to insert a header row into the CSV file."},"language":{"type":"string","description":"The language of the export. The default is the language setting of the administrator called `admin` in the account. For the list of language codes, see [language codes](https://dev.emarsys.com/docs/core-api-reference/dbdc7035d4ea6-language-codes).","minLength":2,"maxLength":2,"pattern":"^[a-z]{2}"},"sftp_settings":{"type":"object","description":"Mandatory distribution settings parameter, if the `distribution_method` is `ftp`. For `local`, these settings are ignored.","x-stoplight":{"id":"tkwi7vkub957m"},"properties":{"host":{"type":"string","format":"uri","description":"The address of the FTP host."},"port":{"type":"string","description":"The port of the FTP host."},"username":{"type":"string","description":"The login user name."},"password":{"type":"string","description":"The login password."},"folder":{"type":"string","description":"The folder on the FTP that contains the export file. Optional."}}},"notification_url":{"type":"string","description":"Sends a request to the provided URL when the export is ready.\n\nSet this parameter to implement a callback mechanism instead of polling the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) endpoint.\n\n**Note**: The payload is the same as the [Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status) response.","format":"uri"}}}}}},"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"integer","description":"The export identifier that you can use to poll export status ([Check Export Status](https://dev.emarsys.com/docs/core-api-reference/7qhvm38n6p97n-check-export-status)) and download the export file ([Download Export Data](https://dev.emarsys.com/docs/core-api-reference/1t5289d66k91x-download-export-data))."}}}}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}},"/v3/export/{exportId}":{"get":{"summary":"Check Export Status","description":"Returns information about an export, including its status, type, and output settings.\n\n**Important:** In the exports, the created column is in Vienna timezone. Vienna timezone is UTC+2 in summertime but with Daylight Saving in wintertime it changes to UTC+1). Bear in mind that UTC does not observe Daylight Saving Time (unlike GMT).\n\n**Note:** This endpoint tracks the status of an asynchronous operation using a job identifier. You can initiate an export job and get the identifier at the following endpoints:\n- [Export Updated Contacts](https://dev.emarsys.com/docs/core-api-reference/088x942warcux-export-updated-contacts)\n- [Export a Contact List](https://dev.emarsys.com/docs/core-api-reference/hnds41g9anuip-export-a-contact-list)\n- [Export a Segment](https://dev.emarsys.com/docs/core-api-reference/q5qhlua41w1ed-export-a-segment)\n- [Export Responses](https://dev.emarsys.com/docs/core-api-reference/t3jrgztmrgv4i-export-responses)","operationId":"checkExportStatus","tags":["Contact and email data"],"parameters":[{"schema":{"type":"integer"},"in":"path","required":true,"name":"exportId","description":"The export identifier returned at the [Export Updated Contacts](https://dev.emarsys.com/docs/core-api-reference/088x942warcux-export-updated-contacts) endpoint."}],"responses":{"200":{"description":"Successful call.","content":{"application/json":{"schema":{"type":"object","description":"See the example or [Response Codes](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors) for details.","properties":{"replyCode":{"type":"integer","description":"The SAP Emarsys [response code](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"replyText":{"type":"string","description":"The summary of the [response](https://dev.emarsys.com/docs/core-api-reference/cnyqzhdnbl7r2-http-200-errors)."},"data":{"type":"array","description":"The requested data.","items":{"type":"object","properties":{"id":{"type":"string","description":"The operation identifier."},"created":{"type":"string","description":"The start date of the job."},"status":{"type":"string","enum":["scheduled","in progress","ready","done","error"],"description":"The status of the job.\n\n**Possible values:**\n- **scheduled:** The export process has not been started yet\n- **in progress:** The export is currently being processed\n- **ready:** The CSV file is ready for distribution\n- **done:** The export finished without errors and the CSV file is created and distributed successfully\n- **error:**  An error occurred during the export process\n\n**Note:** When using FTP and the host is unavailable, or the authentication failed, the export status still displays as ready. The process will try to reconnect to the FTP after one hour. If the export process still cannot connect (as in the status is *ready* for more than one hour), contact Emarsys support."},"type":{"type":"string","enum":["Responses","Registrations"],"description":"Indicates whether the export contains responses or registrations."},"file_name":{"type":"string","description":"The name of the output CSV file.\n\n**Note:** Changes from `null` when the status is *done*."},"ftp_host":{"type":"string","description":"The export settings to locate the file if the distribution method is FTP."},"ftp_dir":{"type":"string","description":"The export settings to locate the file if the distribution method is FTP."}}}}}},"examples":{"Example 1":{"value":{"replyCode":0,"replyText":"string","data":[{"id":"2332","created":"2022-03-26","status":"scheduled","type":"Responses","file_name":"string","ftp_host":"string","ftp_dir":"string"}]}}}}}},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}},"/v3/export/{exportId}/data":{"get":{"summary":"Download Export Data","description":"Returns a CSV file once the export job is finished. You must set the distribution method to `local` when initiating an export job at the following endpoints:\n- [Export Updated Contacts](https://dev.emarsys.com/docs/core-api-reference/088x942warcux-export-updated-contacts)\n- [Export a Contact List](https://dev.emarsys.com/docs/core-api-reference/hnds41g9anuip-export-a-contact-list)\n- [Export a Segment](https://dev.emarsys.com/docs/core-api-reference/q5qhlua41w1ed-export-a-segment)\n\n**Note:** It is recommended to use FTP or WebDAV to access exports. For configuration options, contact Emarsys support.\n\n**Important:** This endpoint returns a file instead of JSON. The *Content-Type* of the response is `text/csv;charset=UTF-8`.","operationId":"downloadExportData","tags":["Contact and email data"],"parameters":[{"schema":{"type":"integer"},"in":"path","name":"export","required":true,"description":"The identifier of the export job initiated at the [Export Updated Contacts](https://dev.emarsys.com/docs/core-api-reference/088x942warcux-export-updated-contacts) endpoint."},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/offset"}],"responses":{"200":{"$ref":"#/components/responses/default-response"},"400":{"$ref":"#/components/responses/default-response"}},"security":[{"oauth2ClientCredentials":[]}]}}},"security":[{"oauth2ClientCredentials":[]}],"components":{"schemas":{"default-response-example":{"title":"Default response","type":"object","properties":{"replyCode":{"type":"integer","description":"The Emarsys response code. Successful requests return 0; otherwise, see [errors](https://dev.emarsys.com/docs/core-api-reference/jir98la21pufy-http-400-errors)."},"replyText":{"type":"string","description":"Additional informationon the status of the request."},"data":{"type":"object","description":"Contains the requested data, if applicable."}},"description":"This is the generic SAP Emarsys response.","x-examples":{"Example 1":{"replyCode":0,"replyText":"string","data":{}}}}},"responses":{"default-response":{"description":"Response example:","content":{"application/json":{"schema":{"$ref":"#/components/schemas/default-response-example"},"examples":{"Example 1":{"value":{"replyCode":0,"replyText":"string","data":{}}}}}}}},"securitySchemes":{"oauth2ClientCredentials":{"type":"oauth2","flows":{"clientCredentials":{"tokenUrl":"https://{host}/oauth2/token","refreshUrl":"","scopes":{}}},"description":"To use this API, you must first obtain an OAuth 2.0 client credentials token. After that you can use the token to call the API. For more information, see [Authentication](https://dev.emarsys.com/docs/emarsys-core-api-guides/branches/OAuth-2.0/b3c3a1eba8515-authentication-in-v3-api)."}},"parameters":{"limit":{"name":"limit","in":"query","required":true,"schema":{"type":"integer","default":10000000,"minLength":1,"maxLength":10000000},"description":"Specifies the maximum number of records to return."},"offset":{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0},"description":"Specifies an offset for pagination. The offset of the first record is *0*."}}}}